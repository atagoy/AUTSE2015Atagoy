function WMP_EDIT_CATEGORIES(){var e=this;this.type="wmp_editcategories";this.form;this.DOMDoc;this.changingStatus=false;this.init=function(){WMPJSInterface=window.parent.WMPJSInterface;this.form=this.DOMDoc.getElementById(this.type+"_form");if(this.form==null){return}this.initCategories();this.initListActions()};this.initListActions=function(){jQuery("ul.categories",this.form).sortable({update:function(t,n){e.changeOrder()}});this.update()};this.initCategories=function(){jQuery("li",this.form).on("click",function(){var t=confirm("Are you sure you want to change the status for this category?");if(t){var n;var r=jQuery(".status",this);var i=jQuery(this).attr("data-category-id");if(r.hasClass("active")==false){n="active"}else{n="inactive"}if(e.changingStatus==false){WMPJSInterface.Preloader.start();jQuery.post(ajaxurl,{action:"wmp_content_save",id:i,status:n},function(t){e.changingStatus=false;WMPJSInterface.Preloader.remove(100);var t=Boolean(Number(String(t)));if(t==true){r.addClass(n);r.removeClass(n=="active"?"inactive":"active");r.text(n);var i="The status of this category has been changed.";WMPJSInterface.Loader.display({message:i});var s=jQuery("li span.active",e.form).length;if(s>0){jQuery("#"+e.type+"_warning",e.DOMDoc).hide()}else{jQuery("#"+e.type+"_warning",e.DOMDoc).show()}}else{var i="There was an error. Please reload the page and try again in few seconds or contact the plugin administrator if the problem persists.";WMPJSInterface.Loader.display({message:i})}})}}});jQuery("#"+e.type+"_warning a.close-x",this.form).on("click",function(){jQuery("#"+e.type+"_warning",e.DOMDoc).hide()})};this.changeOrder=function(){if(e.changingStatus==true)return;var t="";jQuery("ul.categories li",e.form).each(function(e,n){t+=jQuery(this).attr("data-category-id")+",";var r=e+1;jQuery(this).attr("data-order",r)});WMPJSInterface.Preloader.start();e.changingStatus=true;jQuery.post(ajaxurl,{action:"wmp_content_order",type:"categories",ids:t},function(t){WMPJSInterface.Preloader.remove(100);e.changingStatus=false;var t=Boolean(Number(String(t)));if(t==true){var n="The order of the categories has been successfully changed.";WMPJSInterface.Loader.display({message:n})}else{var n="There was an error. Please reload the page and try again in few seconds or contact the plugin administrator if the problem persists.";WMPJSInterface.Loader.display({message:n})}})};this.update=function(){var t=jQuery("ul.categories li",this.form).length;if(t>1){jQuery("ul.categories",e.form).sortable("enable")}else{jQuery("ul.categories",e.form).sortable("disable")}}}