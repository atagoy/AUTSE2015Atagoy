function WMP_WAITLIST(){var JSObject=this;this.type="wmp_waitlist";this.container;this.form;this.actionBox;this.DOMDoc;this.send_btn;this.display_btn;this.submitURL;this.listType;this.init=function(){WMPJSInterface=window.parent.WMPJSInterface;this.send_btn=jQuery("#"+this.type+"_send_btn",this.container).get(0);this.display_btn=jQuery("#"+this.type+"_display_btn",this.container).get(0);this.actionBox=jQuery("#"+this.type+"_action",this.container).get(0);this.form=jQuery("#"+this.type+"_form",this.container).get(0);this.addButtonsActions();if(this.form==null){return}this.initValidation()};this.initValidation=function(){this.validator=jQuery("#"+this.form.id,this.container).validate({rules:{wmp_waitlist_emailaddress:{required:true,email:true}},messages:{wmp_waitlist_emailaddress:{email:"Invalid e-mail address"}},errorPlacement:function(e,t){var n=t[0].id.split("_");var r=n.length>1?n[n.length-1]:n[0];var i=jQuery("#error_"+r+"_container",JSObject.DOMDoc);e.appendTo(i)},errorElement:"span"});var e=jQuery("#"+this.type+"_email",this.container);e.data("holder",e.attr("placeholder"));e.focusin(function(){jQuery(this).attr("placeholder","")}).focusout(function(){jQuery(this).attr("placeholder",jQuery(this).data("holder"))})};this.addButtonsActions=function(){jQuery(this.send_btn).unbind("click");jQuery(this.send_btn).bind("click",function(){JSObject.disableButton(this);JSObject.validate()});JSObject.enableButton(this.send_btn);jQuery(this.display_btn).unbind("click");jQuery(this.display_btn).bind("click",function(){JSObject.disableButton(this);jQuery(JSObject.form).show();jQuery(JSObject.actionBox).hide()});JSObject.enableButton(this.display_btn);jQuery("#"+JSObject.form.id,JSObject.DOMDoc).bind("keypress",function(e){if(e.keyCode==13)return false})};this.enableButton=function(e){jQuery(e).css("cursor","pointer");jQuery(e).animate({opacity:1},100)};this.disableButton=function(e){jQuery(e).unbind("click");jQuery(e).animate({opacity:.4},100);jQuery(e).css("cursor","default")};this.validate=function(){jQuery(this.form).validate().form();var e=[];for(var t in this.validator.invalid){var n=jQuery(this.form[t]);e.push(n.offset().top)}if(e.length==0){JSObject.sendData()}else{JSObject.addButtonsActions()}};this.sendData=function(){WMPJSInterface.Preloader.start();jQuery.ajax({url:JSObject.submitURL,type:"post",data:{email:jQuery("#"+JSObject.type+"_emailaddress",JSObject.container).val(),list:JSObject.listType},dataType:"jsonp",success:function(responseJSON){WMPJSInterface.Preloader.remove(100);JSON=eval(responseJSON);response=Boolean(Number(String(JSON.status)));if(response==0){var message="There was an error. Please reload the page and try again in few seconds or contact the plugin administrator if the problem persists.";WMPJSInterface.Loader.display({message:message});JSObject.form.reset();setTimeout(function(){var e=JSObject.form.elements;nElems=e.length;for(j=0;j<nElems;j++){e[j].disabled=false}},300);JSObject.addButtonsActions()}else{WMPJSInterface.Loader.display({message:JSON.message});jQuery(JSObject.form).hide();jQuery("#"+JSObject.type+"_added",JSObject.container).show();if(response==1){jQuery.post(ajaxurl,{action:"wmp_settings_save",joined_waitlist:JSObject.listType},function(e){})}}},error:function(e){}})}}