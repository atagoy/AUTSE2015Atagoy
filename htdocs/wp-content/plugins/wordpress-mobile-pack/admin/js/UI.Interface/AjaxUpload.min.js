/** @author Ardeleanu Ionut @langversion JAVASCRIPT http://www.appticles.com ionut@appticles.com */ function WMPAjaxUpload(){var e=this;this.frame=function(t){var n="f"+Math.floor(Math.random()*99999);jQuery("body *:first",window.document).before('<div><iframe style="display:none" src="about:blank" id="'+n+'" name="'+n+'"></iframe></div>');jQuery("#"+n,window.document).bind("load",function(){e.loaded(n)});if(t&&typeof t.onComplete=="function"){jQuery("#"+n,window.document).get(0).onComplete=t.onComplete}return n};this.form=function(e,t){jQuery(e).attr("target",t)};this.dosubmit=function(t,n){e.form(t,e.frame(n));if(n&&typeof n.onStart=="function"){return n.onStart()}else{return true}};this.loaded=function(e){if(jQuery("#"+e,window.document).get(0).contentWindow){var t=jQuery("#"+e,window.document).get(0).contentWindow.document}else if(jQuery("#"+e,window.document).get(0).contentDocument){var t=jQuery("#"+e,window.document).get(0).contentDocument}else{var t=window.frames[e].document}if(t.location.href=="about:blank"){return}if(typeof jQuery("#"+e,window.document).get(0).onComplete=="function"){jQuery("#"+e,window.document).get(0).onComplete(t.body.innerHTML)}}}